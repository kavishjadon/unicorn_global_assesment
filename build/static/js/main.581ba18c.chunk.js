(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{90:function(e,t,c){},91:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c(0),s=c.n(a),r=c(11),i=c.n(r),j=c(25),l=c(70),o=c(130),d=c(131),b=c(132),h=c(133),O=c(137),x=c(134),u=c(142),p=c(135),f=c(117),m=Object(f.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerContainer:{overflow:"auto"},content:{background:"#e6e7e9",height:"100vh",flexGrow:1,padding:e.spacing(3)}}})),g=c(32),v=c(71),y=c(136),E=c(54),N=c(93),w=c(138),S=c(125),T=c(5),D=c(120),C=c(121),A=c(122),k=c(123),L=c(51),I=c(119),R=Object(T.a)({root:{borderBottom:"none"}})(I.a);function U(e){var t=e.classData,c=(e.setclassData,e.edit),s=void 0!==c&&c,r=e.noButton,i=void 0!==r&&r,l=Object(a.useState)(!1),o=Object(j.a)(l,2),d=o[0],b=o[1],h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(e=e.split(" "))[0]=e[0].split(":"),e[0].pop(),e[0]=e[0].join(":"),e.join(" ")};return Object(a.useEffect)((function(){if(t){var e=new Date(t.start_time),c=new Date(t.end_time),n=e.toDateString().split(" "),a=h(e.toLocaleTimeString())+" TO "+h(c.toLocaleTimeString()),s=Object(g.a)(Object(g.a)({},t),{},{date:n,time:a});b(s)}}),[t]),!!d&&Object(n.jsx)(D.a,{children:Object(n.jsx)(C.a,{children:Object(n.jsxs)(A.a,{children:[Object(n.jsx)(R,{component:"th",scope:"row",align:"center",children:Object(n.jsxs)(N.a,{style:{background:"#fed500"},children:[Object(n.jsx)(E.a,{variant:"h6",children:Object(n.jsx)("strong",{children:d.date[2]})}),Object(n.jsx)(E.a,{variant:"h6",className:"uppercase",children:Object(n.jsx)("strong",{children:d.date[1]})})]})}),Object(n.jsxs)(R,{children:[Object(n.jsxs)(E.a,{variant:"subtitle1",className:"uppercase",children:["DATE:"," ",Object(n.jsx)("strong",{children:d.date[2]+"-"+d.date[1]+"-"+d.date[3]})]}),Object(n.jsxs)(E.a,{variant:"subtitle1",className:"uppercase",children:["TIME: ",Object(n.jsx)("strong",{children:d.time})]})]}),Object(n.jsxs)(R,{children:[Object(n.jsxs)(E.a,{variant:"subtitle1",className:"uppercase",children:["TOPIC: ",Object(n.jsx)("strong",{children:d.topic})]}),Object(n.jsxs)(E.a,{variant:"subtitle1",className:"uppercase",children:["TEACHER: ",Object(n.jsx)("strong",{children:d.teacher})]})]}),Object(n.jsx)(R,{children:Object(n.jsxs)(E.a,{variant:"subtitle1",className:"uppercase",children:["BATCH: ",Object(n.jsx)("strong",{children:d.batch})]})}),Object(n.jsx)(R,{align:"right",children:i?"":Object(n.jsx)(L.b,{to:"/attendence?class=".concat(d._id),children:Object(n.jsx)(k.a,{color:s?"secondary":"primary",variant:"contained",children:s?"EDIT":"MARK"})})})]})})})}var M=c(124),P=c(141);function B(){return Object(n.jsx)(N.a,{elevation:0,style:{padding:"15px 20px"},children:Object(n.jsxs)(M.a,{container:!0,direction:"row",alignItems:"center",justify:"space-between",children:[Object(n.jsx)(M.a,{item:!0,children:Object(n.jsxs)(M.a,{container:!0,alignItems:"center",spacing:2,children:[Object(n.jsx)(M.a,{item:!0,children:Object(n.jsx)(P.a,{style:{height:50,width:50,border:"1px solid black",background:"white"},children:" "})}),Object(n.jsx)(M.a,{item:!0,children:Object(n.jsx)(E.a,{variant:"h3",style:{fontWeight:"900",color:"#fed500"},children:"IMS PITAMPURA"})})]})}),Object(n.jsxs)(M.a,{item:!0,children:[Object(n.jsx)(E.a,{variant:"subtitle2",children:"TOTAL STUDENTS : 21"}),Object(n.jsx)(E.a,{variant:"subtitle2",children:"TOTAL BATCHES : 4"})]})]})})}function W(e){var t=e.children,c=e.value,a=e.index,s=Object(v.a)(e,["children","value","index"]);return Object(n.jsx)("div",Object(g.a)(Object(g.a)({role:"tabpanel",hidden:c!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},s),{},{children:c===a&&Object(n.jsx)(y.a,{p:3,children:Object(n.jsx)(E.a,{children:t})})}))}function F(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function z(e){var t=e.classesData,c=Object(a.useState)(0),s=Object(j.a)(c,2),r=s[0],i=s[1];return Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)(B,{}),Object(n.jsx)("br",{}),Object(n.jsxs)(N.a,{elevation:0,style:{padding:"0px 20px"},children:[Object(n.jsxs)(w.a,{value:r,onChange:function(e,t){i(t)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth",children:[Object(n.jsx)(S.a,Object(g.a)({label:Object(n.jsxs)("div",{children:[Object(n.jsx)(E.a,{variant:"h6",style:{fontWeight:900},children:"UNMARKED"}),Object(n.jsx)(E.a,{variant:"h6",style:{fontWeight:900},children:"CLASSES"})]})},F(0))),Object(n.jsx)(S.a,Object(g.a)({label:Object(n.jsxs)("div",{children:[Object(n.jsx)(E.a,{variant:"h6",style:{fontWeight:900},children:"MARKED"}),Object(n.jsx)(E.a,{variant:"h6",style:{fontWeight:900},children:"CLASSES"})]})},F(1)))]}),Object(n.jsx)(W,{value:r,index:0,children:t.filter((function(e){return!e.marked})).map((function(e,t){return Object(n.jsx)(U,{classData:e},t)}))}),Object(n.jsx)(W,{value:r,index:1,children:t.filter((function(e){return e.marked})).map((function(e,t){return Object(n.jsx)(U,{classData:e,edit:!0},t)}))})]})]})}var J=c(127),K=c(128),H=c(129),_=c(139),V=c(68),G=c.n(V),q=c(140),Q=c(126),X=c(69),Y=c.n(X);function Z(e){var t=e.message,c=e.setMessage;return Object(n.jsx)(q.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:!!t,autoHideDuration:3e3,onClose:function(){return c(!1)},message:t,action:Object(n.jsx)(s.a.Fragment,{children:Object(n.jsx)(Q.a,{size:"small","aria-label":"close",color:"inherit",onClick:function(){return c(!1)},children:Object(n.jsx)(Y.a,{fontSize:"small"})})})})}function $(e){var t=e.classesData,c=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}("class"),s=Object(a.useState)([]),r=Object(j.a)(s,2),i=r[0],l=r[1],o=Object(a.useState)(!0),d=Object(j.a)(o,2),b=d[0],h=d[1],O=Object(a.useState)(!1),x=Object(j.a)(O,2),u=x[0],p=x[1],f=Object(a.useRef)(),m=t.find((function(e){return e._id==c}));return Object(a.useEffect)((function(){t&&m&&fetch("/api/students?batch=".concat(m.batch,"&classID=").concat(c)).then((function(e){return e.json()})).then((function(e){return l(e.data)})).catch(console.log)}),[]),Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)(Z,{message:u,setMessage:p}),Object(n.jsx)(B,{}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsxs)(N.a,{elevation:0,style:{padding:"0px 20px"},children:[Object(n.jsx)(U,{classData:m,noButton:!0}),Object(n.jsx)("br",{}),Object(n.jsx)(J.a,{}),Object(n.jsxs)(M.a,{container:!0,direction:"row",alignItems:"flex-end",children:[Object(n.jsxs)(M.a,{item:!0,children:[Object(n.jsx)(E.a,{variant:"h6",children:Object(n.jsx)("strong",{children:"BULK UPLOAD"})}),Object(n.jsxs)(E.a,{variant:"subtitle2",children:["To bulk upload the attendance of this class, please follow the below mentioned steps:",Object(n.jsxs)("ol",{style:{margin:0},children:[Object(n.jsx)("li",{children:'Download the template by clicking on the "Download" button'}),Object(n.jsx)("li",{children:'Fill the roll nos. of the students "PRESENT" in column 1'}),Object(n.jsx)("li",{children:'Save as ".CSV" file'}),Object(n.jsx)("li",{children:Object(n.jsx)("strong",{children:'Upload the file using the "Upload" button'})})]})]})]}),Object(n.jsxs)(M.a,{item:!0,children:[Object(n.jsx)("input",{type:"file",id:"file",ref:f,style:{display:"none"},onChange:function(e){var t=[];G.a.parse(e.target.files[0],{complete:function(){var e=JSON.parse(JSON.stringify(i));e.forEach((function(c,n){t.findIndex((function(e){return e==c.rollno}))>-1&&(e[n].present=!0)})),l(e)},header:!1,fastMode:!0,skipEmptyLines:!0,transform:function(e){t.push(e)}})}}),Object(n.jsx)(k.a,{onClick:function(e){fetch("/dummy.csv").then((function(e){return e.blob()})).then((function(e){var t=window.URL.createObjectURL(e),c=document.createElement("a");c.href=t,c.download="dummy.csv",document.body.appendChild(c),c.click(),c.remove()}))},color:"primary",variant:"contained",children:"DOWNLOAD"}),Object(n.jsx)("span",{style:{margin:"0px 20px"}}),Object(n.jsx)(k.a,{onClick:function(){return f.current.click()},color:"secondary",variant:"contained",children:"UPlOAD"})]})]}),Object(n.jsx)("br",{})]}),Object(n.jsx)("br",{}),Object(n.jsxs)(N.a,{elevation:0,style:{padding:"10px 20px"},children:[Object(n.jsx)(E.a,{variant:"h6",children:Object(n.jsx)("strong",{children:"MANUAL ATTENDENCE RECORDING "})}),Object(n.jsx)(J.a,{style:{margin:"10px 0"}}),Object(n.jsxs)(M.a,{container:!0,direction:"row",justify:"space-between",children:[Object(n.jsx)(M.a,{item:!0,children:Object(n.jsx)(E.a,{variant:"subtitle1",children:"Select the students that are/were present in the class or select all by clicking on the button"})}),Object(n.jsx)(M.a,{item:!0,children:Object(n.jsxs)(k.a,{onClick:function(){var e=i.slice();e=e.map((function(e){return e.present=!!b,e})),l(e),h(!b)},color:"primary",variant:"contained",children:["SELECT ",b?"ALL":"NONE"]})})]}),Object(n.jsx)("br",{}),Object(n.jsx)(K.a,{children:Object(n.jsxs)(D.a,{"aria-label":"simple table",children:[Object(n.jsx)(H.a,{style:{background:"#fed500"},children:Object(n.jsxs)(A.a,{children:[Object(n.jsx)(I.a,{}),Object(n.jsx)(I.a,{children:Object(n.jsx)(E.a,{children:Object(n.jsx)("strong",{children:"STUDENT NAME"})})}),Object(n.jsx)(I.a,{children:Object(n.jsx)(E.a,{children:Object(n.jsx)("strong",{children:"ROLL NO."})})}),Object(n.jsx)(I.a,{children:Object(n.jsx)(E.a,{children:Object(n.jsx)("strong",{children:"PRESENT"})})})]})}),Object(n.jsx)(C.a,{children:i.map((function(e,t){return Object(n.jsxs)(A.a,{children:[Object(n.jsx)(I.a,{component:"th",scope:"row",children:Object(n.jsx)(P.a,{style:{height:50,width:50,border:"1px solid black",background:"white"},children:" "})}),Object(n.jsx)(I.a,{children:Object(n.jsx)(E.a,{className:"uppercase",children:e.name})}),Object(n.jsx)(I.a,{children:Object(n.jsx)(E.a,{className:"uppercase",children:e.rollno})}),Object(n.jsx)(I.a,{children:Object(n.jsx)(_.a,{checked:e.present,onChange:function(e){return function(e,t){var c=i.slice();c[t].present=e.target.checked,l(c)}(e,t)},color:"primary"})})]})}))})]})}),Object(n.jsx)("br",{}),Object(n.jsx)(k.a,{style:{float:"right"},variant:"contained",color:"secondary",onClick:function(){console.log(i,"saving attendence"),m.marked=!0,fetch("/api/students?batch=".concat(m.batch),{method:"PUT",body:JSON.stringify({students:i,classData:m}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(){return p("Attendence Saved Successfully")})).catch(console.log)},children:"SAVE ATTENDENCE"}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{})]}),Object(n.jsx)("br",{})]})}var ee=c(13),te=Object(l.a)({typography:{fontFamily:"Catamaran"},palette:{primary:{main:"#fed500"}}});function ce(){var e=m(),t=Object(a.useState)(),c=Object(j.a)(t,2),s=c[0],r=c[1];return Object(a.useEffect)((function(){fetch("/api/classes").then((function(e){return e.json()})).then((function(e){return r(e.data)}))}),[]),Object(n.jsx)(o.a,{theme:te,children:Object(n.jsxs)("div",{className:e.root,children:[Object(n.jsx)(d.a,{}),Object(n.jsx)(b.a,{elevation:0,position:"fixed",className:e.appBar,children:Object(n.jsx)(h.a,{})}),Object(n.jsxs)(O.a,{className:e.drawer,variant:"permanent",classes:{paper:e.drawerPaper},children:[Object(n.jsx)(h.a,{}),Object(n.jsx)("div",{className:e.drawerContainer,children:Object(n.jsx)(x.a,{children:["ATTENDENCE","MARK ATTENDENCE","VIEW ATTENDENCE"].map((function(e,t){return Object(n.jsx)(u.a,{button:!0,children:Object(n.jsx)(p.a,{primary:e})},e)}))})})]}),Object(n.jsxs)("main",{className:e.content,children:[Object(n.jsx)(h.a,{}),Object(n.jsx)(L.a,{children:Object(n.jsx)(ee.c,{children:s?Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)(ee.a,{exact:!0,path:"/",children:Object(n.jsx)(z,{classesData:s})}),Object(n.jsx)(ee.a,{exact:!0,path:"/attendence",children:Object(n.jsx)($,{classesData:s})})]}):""})})]})]})})}c(89),c(90);i.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(ce,{})}),document.getElementById("root"))}},[[91,1,2]]]);
//# sourceMappingURL=main.581ba18c.chunk.js.map